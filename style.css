/* --- 1. 載入粉圓體 --- */
@font-face {
    font-family: 'jf-openhuninn';
    src: url('https://ymdd-image-tw.s3.ap-east-2.amazonaws.com/font/jf-openhuninn-2.1.ttf') format('truetype');
    font-display: swap;
}

/* --- 2. 核心變數設定 --- */
:root {
    --primary-color: #6d9bc3;       
    --primary-dark: #5a82a5;
    --primary-light: #f1f5f9;
    --accent-emerald: #a3b18a;      
    --accent-amber: #e9c46a;        
    --accent-pink: #e7a8a8;
    --accent-warm: #d9a05b; /* 6. 用來取代亮橘色的新色 */
    --bg-light: #fdfdfd;            
    --text-main: #334155;           
    --text-muted: #94a3b8;
    --radius-lg: 1.25rem;
    --radius-xl: 2.2rem;
}

/* --- 3. 全域修正 --- */
*:not(i):not(.fa):not(.fa-solid):not(.fa-regular):not(.fa-brands) {
    font-family: 'jf-openhuninn', 'PingFang TC', sans-serif !important;
    font-style: normal !important;
}

body {
    background-color: var(--bg-light) !important;
    font-size: 16px !important;
    overflow-x: hidden;
}

/* --- 封殺亮藍色 (優化版：排除編輯圖示與淺色標籤) --- */

/* 1. 先處理邊框 */
[class*="border-blue"] { border-color: var(--primary-color) !important; }

/* 2. 處理背景色 (要把排除淺色底的規則寫在這裡) */
[class*="bg-blue"]:not(.fa-pen):not([class*="bg-blue-50"]), 
[class*="bg-blue-600"]:not(.fa-pen) { 
    background-color: var(--primary-color) !important; 
}

/* 3. 處理文字顏色 (要把排除淺色底標籤的文字顏色寫在這裡) */
[class*="text-blue"]:not(.fa-pen):not([class*="bg-blue-50"]), 
[class*="text-blue-600"]:not(.fa-pen) { 
    color: var(--primary-color) !important; 
}

/* 4. 強制覆蓋：許願卡片標籤 (淺藍底 + 深藍字) */
.wish-card [class*="bg-blue-50"] {
    background-color: var(--primary-light) !important; /* 這是淡藍色 */
    color: var(--primary-color) !important;           /* 這是主色藍 */
    border: 1px solid rgba(109, 155, 195, 0.2) !important;
}

/* 5. 處理輸入框選中時的亮藍色外框 */
input:focus, textarea:focus, select:focus {
    outline: none !important;
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 3px rgba(109, 155, 195, 0.1) !important;
}

/* 6. 取代亮橘色 rgb(245 158 11) - 精準修正版 */

/* 針對背景：設定新橘色背景，並將文字設為白色 */
[class*="bg-amber-500"], .bg-amber-500 {
    background-color: var(--accent-warm) !important;
    color: #ffffff !important;
}

/* 針對純文字或圖示：僅設定新橘色顏色，不強制背景與白色字 */
[class*="text-amber-500"], .text-amber-500 {
    color: var(--accent-warm) !important;
    background-color: transparent !important; /* 確保不會被背景色蓋掉 */
}

[class*="text-[9px]"], [class*="text-[10px]"], [class*="text-xs"] { font-size: 14px !important; }
.content-text, .remark-text, .wish-content { white-space: pre-wrap !important; word-break: break-all; }

/* --- 4. 載入中 (Loading) 修正 --- */
.loading-overlay { 
    position: fixed !important; inset: 0 !important; 
    background: rgba(255, 255, 255, 0.9) !important; 
    backdrop-filter: blur(15px) !important; z-index: 9999;
    display: flex !important; flex-direction: column !important; 
    align-items: center !important; justify-content: center !important; 
}

/* --- 5. 行程與日期篩選 --- */
.date-card.active, [class*="date-card"].active {
    background: var(--primary-color) !important;
    color: white !important;
    border-color: var(--primary-color) !important;
    box-shadow: 0 4px 12px rgba(109, 155, 195, 0.3) !important;
}

.itinerary-item {
    border-radius: var(--radius-lg) !important;
    border-left: 6px solid var(--primary-color) !important;
}
.category-飯店 { border-left-color: var(--accent-emerald) !important; background: #f8faf7 !important; }
.category-美食 { border-left-color: var(--accent-amber) !important; background: #fffcf5 !important; }
.category-購物 { border-left-color: var(--accent-pink) !important; background: #fff9f9 !important; }

/* --- 6. 記帳與匯率設定 --- */
.expense-summary-card, [class*="bg-slate-900"] { 
    background: linear-gradient(135deg, #64748b, #475569) !important; 
    width: 100% !important; box-sizing: border-box;
}

/* 1. 分幣值統計 Padding 與擠壓修正 */
.summary-grid {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 10px !important;
    padding: 10px 0 !important;
}
.summary-item {
    flex: 1 1 calc(50% - 10px) !important; /* 一行兩個 */
    padding: 12px 8px !important; /* 強制內距避免貼邊 */
    background: rgba(255, 255, 255, 0.15) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 12px !important;
    box-sizing: border-box !important;
}

/* 2. 記帳表格左右滑動修正 */
.table-container {
    width: 100% !important;
    overflow-x: auto !important; /* 開啟橫向捲動 */
    -webkit-overflow-scrolling: touch;
    background: white !important;
    border-radius: var(--radius-lg) !important;
}
table {
    min-width: 500px !important; /* 確保足夠寬度以供滑動 */
    width: 100% !important;
}
th, td { padding: 12px 10px !important; }

/* 8. 幣值輸入欄位寬度修正 */
.flex.gap-2.mb-6.overflow-x-auto input {
    max-width: 80px !important; /* 縮小寬度 */
}

/* --- 7. 許願卡片優化 --- */
.wish-card {
    background: white !important;
    border: 2px solid #f0f4f8 !important;
    border-radius: var(--radius-lg) !important; 
    padding: 1.5rem !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.03) !important;
}

/* 3. 許願 Tag 點中底色恢復 */
.tag-filter.active, [class*="tag-filter"].active {
    background-color: var(--primary-color) !important;
    color: white !important;
}

/* 4. 許願完成圓圈樣式 (配合 HTML 修正) */
.fa-circle-check { color: var(--primary-color) !important; }
.fa-circle { color: #cbd5e1 !important; } /* 未完成灰色空心 */

/* 5. 許願編輯圖示預設灰色 */
.fa-pen { color: #cbd5e1 !important; }
.fa-pen:active { color: var(--primary-color) !important; }

.item-done {
    border-radius: var(--radius-lg) !important;
    filter: grayscale(1);
    opacity: 0.5;
}

/* --- 8. 底部導航與加號 --- */
.tab-btn.active, .tab-btn.active i, .tab-btn.active span {
    color: var(--primary-color) !important;
}

/* 7. 右下角新增按鈕 Padding 與圓形修正 */
.btn-floating, [class*="bottom-28"].bg-blue-600 {
    width: 60px !important;
    height: 60px !important;
    padding: 0 !important; /* 強制移除內距防止偏移 */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: 50% !important;
}
.btn-floating i { margin: 0 !important; font-size: 24px !important; }

/* 修正匯率輸入框在小螢幕的表現 */
.flex.gap-2.mb-3.items-center {
    max-width: 100%; /* 確保每一行不超過父容器 */
    box-sizing: border-box;
}

/* 針對匯率欄位（數字部分）做最小寬度與字體微調 */
input[type="number"] {
    -moz-appearance: textfield; /* 隱藏 Firefox 的上下箭頭 */
    min-width: 0; /* 讓 flex-1 能正常縮減 */
}

/* 隱藏 Chrome/Safari 數字輸入框的上下箭頭，節省空間 */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* 移除所有輸入框選中時的亮藍色外框 */
input:focus, textarea:focus, select:focus {
    outline: none !important;
    border-color: var(--primary-color) !important; /* 改成我們的手札藍 */
    box-shadow: 0 0 0 3px rgba(109, 155, 195, 0.1) !important; /* 淡淡的發光感 */
}
